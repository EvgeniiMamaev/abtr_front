"use strict";(self.webpackChunkabtr_front=self.webpackChunkabtr_front||[]).push([[718],{718:function(e,t,n){n.r(t),n.d(t,{default:function(){return Te}});var r=n(7294),a=n(9602),l=n(3069),i=n(2640),o=n(155),c=n(6653),s=n(4578),d=n(6737),m=n.n(d),p=n(1508),u=n(2887),x=n(3981),g=n(2658),h=n(4567),f=n(9062),E=n(9542),b=n(9787),w=n(720),y=n(4423);function v(e){const{initValue:t,onAccept:n}=e,a=new Date(t),[l,i]=r.useState(a);return r.createElement(w._,{dateAdapter:b.Z},r.createElement(y.M,{value:l,cancelText:"Cancel",InputAdornmentProps:{sx:{width:"24px","& button":{p:.5},"& :hover":{color:"primary"}}},onChange:e=>{"function"==typeof n&&n(e),i(e)},openTo:"day",views:["day","month","year"],inputFormat:"[dd.MM.yyyy]",mask:"[__.__.____]",renderInput:e=>r.createElement(E.Z,{...e,variant:"standard",InputProps:{...e.InputProps,sx:{"& input":{width:"130px",flex:"none"},fontSize:"0.875rem",color:"#01579b"}},sx:{width:"165px",py:"1px"}})}))}var Z=n(7896),k=n(9573),S=n(8732),C=n(6926),P=n(6011),_=n(7405),B=n(3694),I=n(5558),A=n(6914),W=n(6867),D=n(7976),z=n(3750),$=n(3461),F=n(6131),M=n(789),R=n(3505),N=n(576),T=n(8885),O=n(9334),L=n(2981),U=n(8619),j=n(5503);const H=(0,a.ZP)(U.Z)`
  padding: 0 0 0 10px;
  height: ${"52"}px;
`,q=(0,a.ZP)("span")`
  width: 24px;
  height: 24px;
  flex: 0 0;
`,G=(0,a.ZP)("span")((({theme:e})=>`\n  font-family: 'Ubuntu';\n  font-style: normal;\n  font-weight: 300;\n  font-size: 12px;\n  line-height: 14px;\n  color: ${e.palette.grey.A100};\n  margin: 0 10px;\n`));function K(e){const{title:t,variant:n,Icon:a,action:l,iconColor:i,color:o,value:c,tabIndex:s,borderColor:d}=e;return r.createElement(N.ZP,{component:"div",disablePadding:!0,sx:{borderBottom:"1px solid",borderColor:d||"transparent"}},r.createElement(H,{onClick:()=>{"function"==typeof l&&l()},tabIndex:s},r.createElement(T.Z,{sx:{flex:"none",p:1,minWidth:24,width:24}},a?r.createElement(a,{color:i||"primary",fontSize:"medium"}):r.createElement(q,null)),r.createElement(O.Z,{primary:r.createElement(r.Fragment,null,r.createElement(g.Z,{variant:n||"body1",color:o||"primary",sx:{mr:4,p:0,wordWrap:"break-word"}},t,c&&r.createElement(G,null,c)))})))}var V=n(2482),Y=n(6540);let X;const J=(0,a.ZP)("span")`
  font-weight: 700;
`;function Q(e){const{days:t}=e;X=(0,$.h_)();(0,F.o)(X.listeners,"refresh",["rolling-retention"]);const n=X.cw.savedData.getRollingRetention();return r.createElement(p.Z,{sx:{p:2,display:"inline-flex",boxSizing:"border-box",justifyContent:"space-between",width:"100%"}},r.createElement(g.Z,{variant:"h3",color:"primary",align:"left"},"Rolling Retention 7 day:Â ",r.createElement(J,null,n)),r.createElement(A.Z,{color:"secondary",variant:"contained",onClick:()=>{X.cw.savedData.calculateMetrics()}},"Calculate"))}var ee=n(6893);let te;const ne=(0,a.ZP)("span")((()=>({border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}))),re=(0,a.ZP)("div")`
  width: 165px;
  min-width: 165px;
  text-align: left;
`,ae=function(e){return r.createElement(u.Z,{checkedIcon:r.createElement(z.MxS,null),icon:r.createElement(z.PHU,null),...e,sx:{fontSize:"1.5em"}})};function le(e){const{headCells:t}=e,{onSelectAllClick:n,order:a,orderBy:l,numSelected:i,rowCount:o,onRequestSort:c}=e;return r.createElement(P.Z,null,r.createElement(B.Z,null,r.createElement(C.Z,{sx:{m:0,width:"5px",bgcolor:"transparent"}},r.createElement("span",null)),r.createElement(C.Z,{sx:{width:"36px",pl:"3px"}},r.createElement(ae,{indeterminate:i>0&&i<o,checked:o>0&&i===o,onChange:n,sx:{color:"primary.dark",opacity:.4,width:"26px"},inputProps:{"aria-label":"select all questions"}})),t.map((e=>{return r.createElement(C.Z,{key:`head-${e.id}`,align:e.align,sx:{color:"primary.dark",ml:"3px",borderWidth:0,opacity:.4,width:e.width||"auto"},padding:"none",sortDirection:l===e.id&&a},e.sortable?r.createElement(I.Z,{active:l===e.id,direction:l===e.id?a:"asc",onClick:(t=e.id,e=>{c(e,t),te.listeners.run("refresh",["main-table"])})},r.createElement(g.Z,{variant:"body1",color:"inherit",sx:{textTransform:"uppercase",fontWeight:400}},e.label),l===e.id?r.createElement(ne,null,"desc"===a?"sorted descending":"sorted ascending"):null):r.createElement(g.Z,{variant:"body1",color:"inherit",sx:{textTransform:"uppercase",fontWeight:400}},e.label));var t})),r.createElement(C.Z,{sx:{m:0,borderWidth:0,width:"5px",bgcolor:"transparent"}},r.createElement("span",null))))}function ie(e){const{item:t}=e,[n,a]=r.useState(!1),l=t.isWrong?"error.light":t.id<0||t.isChanged?"success.light":"primary.main";return r.createElement(B.Z,{hover:!0,tabIndex:-1,selected:n,color:"primary",sx:{":hover":{backgroundColor:"#fffeba!important"}}},r.createElement(C.Z,{sx:{m:0,width:"5px",bgcolor:M.SB?.paper?.css?.backgroundColor||"transparent"}},r.createElement(p.Z,{sx:{backgroundColor:`${l}`,borderRadius:"5px 0 0 5px",height:"46px",width:"5px"}})),r.createElement(C.Z,{sx:{pl:"3px"}},r.createElement(ae,{onChange:()=>{a(!n)},checked:n,sx:{color:"primary.dark",opacity:.6,width:"26px"}})),r.createElement(C.Z,{align:"left"},r.createElement(x.Z,{readOnly:!0,multiline:!1,disableUnderline:!0,value:t.user_id,margin:"none",placeholder:"User ID",fullWidth:!0,inputProps:{sx:{textOverflow:"ellipsis"}}})),r.createElement(C.Z,{align:"left",sx:{pl:"4px"}},r.createElement(re,null,`[${te.formatDate(t.registration)}]`)),r.createElement(C.Z,{align:"left",sx:{pl:"4px"}},r.createElement(re,null,`[${te.formatDate(t.last_activity)}]`)),r.createElement(C.Z,{align:"left"},r.createElement("span",{style:{display:"inline-flex"}},r.createElement(W.Z,{onClick:()=>{},color:"primary",sx:{ml:-1,p:.5}},r.createElement(s.R6G,{fontSize:"20px"})),r.createElement(W.Z,{color:"primary",sx:{p:.5}},r.createElement(ee.$Pu,{fontSize:"20px"})))),r.createElement(C.Z,{sx:{m:0,width:"5px",bgcolor:M.SB?.paper?.css?.backgroundColor||"transparent"}},r.createElement(p.Z,{sx:{borderRadius:"0 5px 5px 0",height:"46px",width:"5px",backgroundColor:"primary.main"}})))}function oe(e){const{headCells:t,dataset:n}=e;te=(0,$.h_)();const[a,l]=r.useState("asc"),[i,o]=r.useState("user_id"),[c,s]=r.useState([]),[d,m]=r.useState(0),[p,u]=r.useState(5),x=n,g=p-Math.min(p,x.length-d*p),h=te.stableSort(x,te.getComparator(a,i)).slice(d*p,d*p+p).map(((e,t)=>r.createElement(ie,{key:`row-${e.id}`,item:e,num:t})));return r.createElement(r.Fragment,null,r.createElement(Z.Z,null,r.createElement(k.Z,{padding:"none",sx:{borderSpacing:"0 2px",borderCollapse:"separate","& tr":{height:"46px",backgroundColor:"white"},"& svg, & input":{color:"primary.main"},"& thead th":{borderWidth:0},"& tr td":{fontWeight:300,fontSize:"14px",lineHeight:"16px",color:"primary.main",borderWidth:0}}},r.createElement(le,{headCells:t,numSelected:c.length,order:a,orderBy:i,onSelectAllClick:e=>{if(e.target.checked){const e=x.map((e=>e.id));s(e)}else s([])},onRequestSort:(e,t)=>{l(i===t&&"asc"===a?"desc":"asc"),o(t)},rowCount:x.length}),r.createElement(S.Z,null,h,g&&x.length>p?r.createElement(B.Z,{sx:{height:(Number("46")+2)*g-2+"px!important"}},r.createElement(C.Z,{colSpan:7})):null))),r.createElement(_.Z,{onPageChange:(e,t)=>{m(t)},rowsPerPageOptions:[5,10,25,50],count:x.length,rowsPerPage:p,page:d,onRowsPerPageChange:e=>{u(parseInt(e.target.value,10)),m(0)},sx:{p:0,color:"primary.main",height:"46px",textAlign:"right"}}))}let ce;function se(e){ce=(0,$.h_)();(0,F.o)(ce.listeners,"refresh",["graphics"]);const t=ce.cw.savedData.get();return r.createElement(r.Fragment,null,r.createElement(g.Z,{variant:"h5",color:"primary.dark",sx:{m:1,p:0,wordWrap:"break-word",textAlign:"left",opacity:.4}},"Current data from the server"),r.createElement(oe,{headCells:Ce,dataset:t}),r.createElement(p.Z,{sx:{width:"100%",display:"inline-flex",justifyContent:"flex-end"}},r.createElement(A.Z,{color:"secondary",variant:"contained",onClick:()=>{ce.cw.savedData.calculateMetrics()}},"Calculate")))}var de=n(2734),me=n(9599),pe=n(4032),ue=n(9223),xe=n(9726),ge=n(953),he=n(3382),fe=n(7923),Ee=n(397);let be,we;const ye=e=>e.count,ve=e=>e,Ze={...he.j,minWidth:60,backgroundColor:"#3C5AA8",color:"white"};function ke({events:e=!1}){be=(0,$.h_)();const t=be.cw.savedData.getGraphData(),n=t?.dataSet||[],a=((0,F.o)(be.listeners,"refresh",["life-span-graph"]),(0,de.Z)()),{tooltipOpen:l,tooltipLeft:i,tooltipTop:o,tooltipData:c,hideTooltip:s,showTooltip:d}=(0,fe.Z)(),{containerRef:m,TooltipInPortal:p}=(0,Ee.Z)({scroll:!0});return n.length?t.width<10?null:r.createElement(r.Fragment,null,r.createElement(g.Z,{variant:"h5",color:"primary.dark",sx:{m:1,p:0,wordWrap:"break-word",textAlign:"left",opacity:.4}},"Histogram of distribution of user lifetimes ",r.createElement("br",null),"(lifetime - is the amount of time in days from registration to last activity)"),r.createElement("div",{style:{position:"relative"}},r.createElement("svg",{ref:m,width:t.width,height:t.height},r.createElement(me.Z,{top:t.verticalMargin/2,left:0,width:t.width,height:t.height},r.createElement(xe.Z,{xScale:t.xScale,yScale:t.yScale,width:t.xMax-20,left:20,xOffset:-20,height:t.yMax,numTicksRows:t.maxYvalue<10?t.maxYvalue:10,numTicksColumns:n.length,stroke:"rgba(204, 210, 206, 0.6)"}),r.createElement(pe.Z,{left:20,scale:t.yScale,tickFormat:ve,tickValues:n.map(ye),stroke:a.palette.primary.main,tickStroke:a.palette.primary.main}),r.createElement("text",{x:"-75",y:"32",transform:"rotate(-90)",fontSize:11,fill:a.palette.primary.dark},"Count of users"),r.createElement("text",{x:"700",y:"451",fontSize:11,fill:a.palette.primary.dark},"Lifetime days"),n.map((e=>{const n=(e=>e.label)(e),l=t.xScale.bandwidth(),i=t.yMax-(t.yScale(ye(e))??0),o=t.xScale(n),c=t.yMax-i;return r.createElement("rect",{key:`bar-${n}`,x:o,y:c,width:l,height:i,fill:a.palette.primary.light,onMouseLeave:()=>{we=window.setTimeout((()=>{s()}),300)},onMouseMove:t=>{we&&clearTimeout(we);const n=(0,ge.Z)(t),r=o+l/2;d({tooltipData:e,tooltipTop:n?.y,tooltipLeft:r})}})}))),r.createElement(ue.Z,{top:t.yMax+t.verticalMargin/2,scale:t.xScale,tickFormat:ve,stroke:a.palette.primary.main,tickStroke:a.palette.primary.main,tickLabelProps:()=>({fill:a.palette.primary.dark,fontSize:11,textAnchor:"middle"})})),l&&c&&r.createElement(p,{top:o,left:i,style:Ze},r.createElement("div",null,r.createElement("strong",null,c.title)),r.createElement("div",null,"Count: ",c.count)))):null}var Se=n(5108);const Ce=[{id:"user_id",numeric:!0,label:"User ID",align:"left",sortable:!0,width:"78px"},{id:"registration",numeric:!1,disablePadding:!0,label:"Date Registration",align:"left",sortable:!0,width:"165px"},{id:"last_activity",numeric:!1,disablePadding:!0,label:"Date Last Activity",align:"left",sortable:!0,width:"165px"},{id:"action",numeric:!1,disablePadding:!1,label:"Action",align:"left",sortable:!1,width:"104px"}],Pe=(0,a.ZP)("div")`
  width: 165px;
  min-width: 165px;
  text-align: left;
`,_e=(0,a.ZP)("span")((()=>({border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}))),Be=[r.createElement((function(e){const{title:t,subTitle:n,action:a,tabIndex:l}=e,[i,o]=r.useState(!0);return r.createElement(p.Z,{sx:{bgcolor:i?"rgba(71, 98, 130, 0.03)":"transparent",pb:i?2:0}},r.createElement(N.ZP,{component:"div",disablePadding:!0,sx:{borderBottom:"1px solid",borderColor:"grey.300"}},r.createElement(H,{alignItems:"center",onClick:()=>{"function"==typeof a&&a()},tabIndex:-1},r.createElement(W.Z,{tabIndex:l,sx:{flex:"none"},onClick:()=>o(!i)},r.createElement(j.Z,{fontSize:"medium",color:"primary",sx:{transform:i?"rotate(-180deg)":"rotate(0)",transition:"0.2s"}})),r.createElement(O.Z,{primary:r.createElement(g.Z,{variant:"h5",color:"primary",sx:{mr:1,p:0,wordWrap:"break-word"}},t),sx:{my:0}}))),r.createElement(L.Z,{in:i,timeout:"auto",unmountOnExit:!0},e.children))}),{key:"grp-01",title:"Projects",subTitle:"",tabIndex:10},r.createElement(K,{key:"item-01",tabIndex:11,title:r.createElement("span",null,"Steampunk",r.createElement("br",null),"defense"),value:21,Icon:V.Z,iconColor:"info",color:"grey.A200",link:"/",action:()=>{Se.log('Click "Steampunk defense"')}}),r.createElement(K,{key:"item-02",tabIndex:12,title:r.createElement("span",null,"Worldwar",r.createElement("br",null),"clicker"),value:12,Icon:V.Z,iconColor:"warning",color:"grey.A200",link:"/",action:()=>{Se.log('Click "Worldwar clicker"')}})),r.createElement((function(e){const{title:t,Icon:n,color:a,iconColor:l,tabIndex:i}=e;return r.createElement(N.ZP,{component:"div",disablePadding:!0,tabIndex:-1,sx:{borderBottom:"1px solid",borderColor:"grey.300",pl:"10px",height:"52px"}},r.createElement(T.Z,{sx:{flex:"none",p:1,minWidth:24,width:24}},n?r.createElement(n,{color:l||"primary",fontSize:"medium"}):r.createElement(q,null)),r.createElement(O.Z,{primary:r.createElement(g.Z,{variant:"h5",color:a||"primary",sx:{mr:1,p:0,wordWrap:"break-word"}},t),sx:{my:0}}))}),{key:"grp-02",title:"Add new",color:"grey.A200",tabIndex:20,Icon:Y.Z}),r.createElement(K,{key:"item-03",tabIndex:21,title:"Account",variant:"h5",borderColor:"grey.300"}),r.createElement(K,{key:"item-04",tabIndex:22,title:"Support",variant:"h5",borderColor:"grey.300"})];let Ie;const Ae=function(e){return r.createElement(u.Z,{checkedIcon:r.createElement(z.MxS,null),icon:r.createElement(z.PHU,null),...e,sx:{fontSize:"1.5em"}})};function We(e){const{onSelectAllClick:t,order:n,orderBy:a,numSelected:l,rowCount:i,onRequestSort:o}=e;return r.createElement(P.Z,null,r.createElement(B.Z,null,r.createElement(C.Z,{sx:{m:0,width:"5px",bgcolor:"transparent"}},r.createElement("span",null)),r.createElement(C.Z,{sx:{width:"36px",pl:"3px"}},r.createElement(Ae,{indeterminate:l>0&&l<i,checked:i>0&&l===i,onChange:t,sx:{color:"primary.dark",opacity:.4,width:"26px"},inputProps:{"aria-label":"select all questions"}})),Ce.map((e=>{return r.createElement(C.Z,{key:`head-${e.id}`,align:e.align,sx:{color:"primary.dark",ml:"3px",borderWidth:0,opacity:.4,width:e.width||"auto"},padding:"none",sortDirection:a===e.id&&n},e.sortable?r.createElement(I.Z,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(t=e.id,e=>{o(e,t),Ie.listeners.run("refresh",["main-table"])})},r.createElement(g.Z,{variant:"body1",color:"inherit",sx:{textTransform:"uppercase",fontWeight:400}},e.label),a===e.id?r.createElement(_e,null,"desc"===n?"sorted descending":"sorted ascending"):null):r.createElement(g.Z,{variant:"body1",color:"inherit",sx:{textTransform:"uppercase",fontWeight:400}},e.label));var t})),r.createElement(C.Z,{sx:{m:0,borderWidth:0,width:"5px",bgcolor:"transparent"}},r.createElement("span",null))))}function De(e){const{item:t}=e,[n,a]=r.useState(!1),[l,i]=r.useState(t.isEdit),[o,c]=r.useState(t.user_id),[d,m]=r.useState(t.registration),[u,g]=r.useState(t.last_activity),[h,f]=r.useState(1),E=r.useRef(null),b=t.isWrong?"error.light":t.id<0||t.isChanged?"success.light":"primary.main",w=()=>{const e=t.check(Ie,o,d,u);e.length?e.forEach((e=>{Ie.log.informError(e)})):Ie.log.informSuccess("Data is correct"),f(h+1)};return r.createElement(B.Z,{hover:!0,tabIndex:-1,selected:n,color:"primary",sx:{":hover":{backgroundColor:"#fffeba!important"}}},r.createElement(C.Z,{sx:{m:0,width:"5px",bgcolor:M.SB?.paper?.css?.backgroundColor||"transparent"}},r.createElement(p.Z,{sx:{backgroundColor:`${b}`,borderRadius:"5px 0 0 5px",height:"46px",width:"5px"}})),r.createElement(C.Z,{sx:{pl:"3px"}},r.createElement(Ae,{onChange:()=>{a(!n)},checked:n,sx:{color:"primary.dark",opacity:.6,width:"26px"}})),r.createElement(C.Z,{align:"left"},r.createElement(x.Z,{readOnly:!l,multiline:!1,disableUnderline:!l,value:o,onChange:e=>{if(isNaN(e.target.value))return void c(o);const t=Number(e.target.value);t>0&&t<Number.MAX_SAFE_INTEGER?c(t):t<=0?(Ie.log.informWarning("ID Ð¿Ð¾Ð»ÑÐ·Ð¾Ð²Ð°ÑÐµÐ»Ñ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±ÑÑÑ Ð±Ð¾Ð»ÑÑÐµ Ð½ÑÐ»Ñ"),c(o)):(Ie.log.informWarning("Ð£ÐºÐ°Ð·Ð°Ð½Ð¾ ÑÐ»Ð¸ÑÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑÑÐ¾Ðµ Ð·Ð½Ð°ÑÐµÐ½Ð¸Ðµ ID Ð¿Ð¾Ð»ÑÐ·Ð¾Ð²Ð°ÑÐµÐ»Ñ"),c(o))},margin:"none",placeholder:"User ID",inputRef:E,fullWidth:!0,inputProps:{sx:{textOverflow:"ellipsis"}},sx:{"& :focus":{fontWeight:l?700:300}}})),r.createElement(C.Z,{align:"left",sx:{pl:"4px"}},l?r.createElement(v,{initValue:d,onAccept:e=>m(e)}):r.createElement(Pe,null,`[${Ie.formatDate(d)}]`)),r.createElement(C.Z,{align:"left",sx:{pl:"4px"}},l?r.createElement(v,{initValue:u,onAccept:e=>g(e)}):r.createElement(Pe,null,`[${Ie.formatDate(u)}]`)),r.createElement(C.Z,{align:"left"},r.createElement("span",{style:{display:"inline-flex"}},l?r.createElement(r.Fragment,null,r.createElement(W.Z,{onClick:()=>{w(),t.isWrong||(t.setFields({user_id:o,registration:d,last_activity:u}),i(!1),t.isEdit=!1)},color:"success",sx:{ml:-1,p:.5}},r.createElement(s.CLo,{fontSize:"20px",style:{color:"#17a942"}})),r.createElement(W.Z,{onClick:()=>{c(t.user_id),m(t.registration),g(t.last_activity),t.check(Ie,t.user_id,t.registration,t.last_activity),i(!1),t.isEdit=!1},color:"error",sx:{p:.5}},r.createElement(s.tDt,{fontSize:"20px",style:{color:"#c20000"}}))):r.createElement(r.Fragment,null,r.createElement(W.Z,{color:"primary",onClick:()=>{i(!0),w(),t.isEdit=!0,E.current.focus()},sx:{ml:-1,p:.5}},r.createElement(s.$jT,{fontSize:"20px"})),r.createElement(W.Z,{onClick:()=>{Ie.cw.userActivities.popItem(t),Ie.listeners.run("refresh",["main-table"])},color:"primary",sx:{p:.5}},r.createElement(s.R6G,{fontSize:"20px"}))),r.createElement(W.Z,{color:"primary",onClick:w,sx:{p:.5}},r.createElement(s.py9,{fontSize:"20px"})),r.createElement(W.Z,{color:"primary",sx:{p:.5}},r.createElement(D.Z,{sx:{fontSize:"20px"}})))),r.createElement(C.Z,{sx:{m:0,width:"5px",bgcolor:M.SB?.paper?.css?.backgroundColor||"transparent"}},r.createElement(p.Z,{sx:{borderRadius:"0 5px 5px 0",height:"46px",width:"5px",backgroundColor:"primary.main"}})))}function ze(e){const[t,n]=r.useState("asc"),[a,l]=r.useState("user_id"),[i,o]=r.useState([]),[c,s]=r.useState(0),[d,u]=r.useState(5),x=((0,F.o)(Ie.listeners,"refresh",["main-table"]),Ie.cw.userActivities.get()),[g,E]=r.useState(!1),b=d-Math.min(d,x.length-c*d),w=()=>{E(!0),Ie.cw.userActivities.save().then((e=>{e.version&&e.version!==Ie.cw.savedData.dataVersion&&Ie.cw.savedData.bulkLoad(e.dataset),m()({title:"Data successfully saved to server!",text:(e.msg||"")+" Clear table?",icon:"success",buttons:{clear:{value:"clear",text:"Yes",className:"ok_button swal_button"},dontclear:{value:"cancel",text:"No",className:"cancel_button swal_button"}}}).then((e=>{"clear"===e&&(Ie.cw.userActivities.clear(),Ie.listeners.run("refresh",["main-table"]))}))})).catch((e=>{m()({title:"Saving data to server failed!",text:e.errorMessage||e.message||"Network error. Please check the Internet connection and try again.",icon:"error",buttons:{ok:{value:"save",text:"OK",className:"ok_button swal_button"}}})})).finally((()=>{E(!1)}))},y=Ie.stableSort(x,Ie.getComparator(t,a)).slice(c*d,c*d+d).map(((e,t)=>r.createElement(De,{key:`row-${e.id}`,item:e,num:t})));return r.createElement(r.Fragment,null,r.createElement(Z.Z,null,r.createElement(k.Z,{padding:"none",sx:{borderSpacing:"0 2px",borderCollapse:"separate","& tr":{height:"46px",backgroundColor:"white"},"& svg, & input":{color:"primary.main"},"& thead th":{borderWidth:0},"& tr td":{fontWeight:300,fontSize:"14px",lineHeight:"16px",color:"primary.main",borderWidth:0}}},r.createElement(We,{numSelected:i.length,order:t,orderBy:a,onSelectAllClick:e=>{if(e.target.checked){const e=x.map((e=>e.id));o(e)}else o([])},onRequestSort:(e,r)=>{n(a===r&&"asc"===t?"desc":"asc"),l(r)},rowCount:x.length}),r.createElement(S.Z,null,y,b?r.createElement(B.Z,{sx:{height:(Number("46")+2)*b-2+"px!important"}},r.createElement(C.Z,{colSpan:7})):null))),r.createElement(_.Z,{onPageChange:(e,t)=>{s(t)},rowsPerPageOptions:[5,10,25,50],count:x.length,rowsPerPage:d,page:c,onRowsPerPageChange:e=>{u(parseInt(e.target.value,10)),s(0)},sx:{p:0,color:"primary.main",height:"46px",textAlign:"right"}}),r.createElement(p.Z,{sx:{width:"100%",display:"inline-flex",justifyContent:"flex-end"}},r.createElement(A.Z,{color:"secondary",variant:"contained",onClick:()=>{Ie.cw.userActivities.isEditing()?m()({title:"Some record is editing",text:"Please finish editing data to save",icon:"warning",buttons:{ok:{value:"OK",text:"OK",className:"ok_button swal_button"}}}):Ie.cw.userActivities.isHaveError()?m()({title:"Are you sure?",text:"Some data errors detected! Continue saving data to the server?",icon:"warning",buttons:{catch:{value:"save",text:"Continue",className:"confirm_button swal_button"},dontsave:{value:"cancel",text:"Cancel",className:"cancel_button swal_button"}}}).then((e=>{"cancel"===e?m()("Saving data canceled!",{buttons:{ok:{value:"OK",text:"OK",className:"ok_button swal_button"}}}):w()})):w()}},"Save"),r.createElement(A.Z,{color:"secondary",variant:"contained",onClick:()=>{Ie.cw.savedData.calculateMetrics()}},"Calculate"),r.createElement(A.Z,{color:"secondary",variant:"contained",onClick:()=>{const e=Math.floor(Ie.cw.userActivities.get().length/d),t=Ie.cw.userActivities.pushItem({});t.isWrong=!0,t.isEdit=!0,s(e),Ie.listeners.run("refresh",["main-table"])}},"Add new record")),r.createElement(h.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:g,onClick:()=>{E(!1)}},r.createElement(f.Z,{color:"inherit"})))}function $e(e){return Ie=(0,$.h_)(),r.createElement(p.Z,null,r.createElement(g.Z,{variant:"h5",color:"primary.dark",sx:{m:1,p:0,wordWrap:"break-word",textAlign:"left",opacity:.4}},"New records manager"),r.createElement(p.Z,null,r.createElement(ze,null)))}let Fe;const Me=(0,a.ZP)(i.Z)`
  font-family: 'Ubuntu';
  font-style: normal;
  font-weight: 300;
  font-size: 16px;
  line-height: 18px;
  text-transform: none;
  button: {
    padding: 8px 29px;
    height: 21px!important;
  }
`;function Re(e){const{children:t,value:n,index:a,...l}=e;return r.createElement("div",{role:"tabpanel",hidden:n!==a,id:`simple-tabpanel-${a}`,"aria-labelledby":`simple-tab-${a}`,...l,style:{backgroundColor:"transparent"}},n===a&&t)}function Ne(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}function Te(){const[e,t]=r.useState(0);return Fe=(0,$.h_)(),r.useEffect((()=>(Fe.cw.savedData.startAutoLoading((()=>Fe.listeners.run("refresh",["graphics"]))),()=>{Fe.cw.savedData.stopAutoLoading()})),[]),r.createElement(R.Z,{drawerBody:Be},r.createElement(g.Z,{variant:"h3",color:"primary.dark",sx:{m:1,p:0,wordWrap:"break-word",textAlign:"left",opacity:.4}},"User Activity Log"),r.createElement(l.Z,{sx:{pt:"5px"},value:e,onChange:(e,n)=>{t(n)},"aria-label":"icon position tabs example"},r.createElement(Me,{icon:r.createElement(o.lkm,null),iconPosition:"start",label:"New Records",...Ne(0)}),r.createElement(Me,{icon:r.createElement(s.EJ8,null),iconPosition:"start",label:"Saved Data",...Ne(1)}),r.createElement(Me,{icon:r.createElement(c.k44,null),iconPosition:"start",label:"Metrics",...Ne(2)})),r.createElement(Re,{value:e,index:0},r.createElement($e,null)),r.createElement(Re,{value:e,index:1},r.createElement(se,null)),r.createElement(Re,{value:e,index:2},r.createElement(Q,null),r.createElement(ke,null)))}},3505:function(e,t,n){n.d(t,{Z:function(){return F}});var r=n(7294),a=n(9602),l=n(1298),i=n(1508),o=n(7049),c=n(789),s=n(3926),d=n(4386),m=n(3461),p=n(6131);let u;function x(e){u=(0,m.h_)();const t=c.SB&&c.SB.drawer||{css:{}};return r.createElement(g,{drawerConfig:t,...e})}function g(e){const{drawerBody:t,drawerConfig:n}=e,a=((0,p.o)(u.listeners,"refresh",["drawer"]),u.isDrawerOpen);return r.createElement(r.Fragment,null,r.createElement(s.Z,{onClickAway:()=>{u.toggleDrawerOpen(!1)}},r.createElement(o.ZP,{variant:"permanent",PaperProps:{sx:{backgroundColor:"usertest.extraLight",background:"linear-gradient(160deg, rgba(243,240,238,1) 0%, rgba(255,239,221,1) 40%, rgba(193,208,232,1) 100%)",boxShadow:"0 0 4px 2px #bbb",transition:"margin 500ms ease",overflowX:"hidden",justifyContent:"flex-start",alignContent:"flex-start",width:"215px",marginLeft:{xs:a?0:"-215px",md:0},...n.css||{}}}},r.createElement(d.Z,{sx:{zIndex:1}}),t)),r.createElement(i.Z,{sx:{transition:"width 500ms ease",alignSelf:"stretch",width:{xs:0,md:"215px",flex:"none"}}}))}var h=n(802),f=n(6272),E=n(6867),b=n(7109),w=n(2761),y=n(326),v=n(3540),Z=n(9123),k=n(2658);let S;const C=(0,a.ZP)("div")`
  padding-left: 23px;
  margin: 0;
  z-index: 1205;
  display: inline-flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  flex-grow: 0;
  position: fixed;
  box-sizing: border-box;
  color: ${c.SB?.header?.css?.color||"#5D6D97"};
  box-shadow: ${c.SB?.header?.css?.boxShadow||"0 0 5px 2px #999"};
  background-color: ${c.SB?.header?.css?.backgroundColor||"white"}
  @media (max-width: 500px) {
    padding-left: 0
  }
`,P=(0,a.ZP)("div")((({theme:e})=>`\n  display: flex;\n  margin-left: 50px;\n  margin-right: 16px;\n  padding: 0 8px;\n  width: 100%;\n  height: 28px;\n  background: #FFFFFF;\n  border: 1px solid;\n  border-color: transparent;\n  border-radius: 20px;\n  color: #BBBBBB;\n  transition: margin 500ms ease-out;\n  tabindex: 999;\n  @media (max-width: 350px) {\n    display: none;\n  };\n  @media (max-width: 500px) {\n    margin-left: 8px;\n    margin-right: 8px;\n    transition: margin 200ms ease-out;\n  };\n  :hover, :active, :focus {\n    border-color:  ${e.palette.primary.main};\n  };\n`)),_=(0,a.ZP)("span")`
  height: 100%;
  pointer-events: none;
  flex:none;
  padding: 2px 0;
  @media (max-width: 450px) {
    display: none;
  }
`,B=(0,a.ZP)("input")((({theme:e})=>`\n  width: 276px;\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 16px;\n  transition: width 500ms ease;\n  background: transparent;\n  color: #BBBBBB;\n  border: none;\n  tabindex: 1;\n  ::placeholder {color: #BBBBBB};\n  :hover {\n    color: ${e.palette.primary.main};\n  };\n  :focus {\n    color: ${e.palette.primary.main};\n    outline: none;\n    width: 450px;\n    transition: width 200ms ease-out;\n  };\n  @media (max-width: 700px) {\n    width: 120px\n  }\n  `)),I=(0,a.ZP)("div")((({theme:e})=>({display:"inline-flex",alignItems:"center",flexDirection:"row",...e.mixins.toolbar}))),A=(0,a.ZP)("span")`
  display: inline-flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  flex-grow: 0
`;function W(e){const{onClose:t,subTitle:n}=e,a="AB Test Real";S=(0,m.h_)();const l=c.SB&&c.SB.header||{css:{}};(0,p.o)(S.listeners,"refresh",["header"]);return r.createElement(r.Fragment,null,r.createElement(C,{sx:{...l.css||{}}},r.createElement(I,null,r.createElement(E.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e=>{e.preventDefault(),e.stopPropagation(),S.toggleDrawerOpen()},tabIndex:1,sx:{m:0,display:{xs:e.drawerBody?"flex":"none",md:"none"}}},r.createElement(y.Z,null)),n&&S.is_logged?r.createElement(i.Z,{sx:{flex:"none",position:"relative"}},r.createElement(k.Z,{variant:"h1",noWrap:!0,color:"primary"},a),r.createElement(i.Z,{sx:{position:"absolute",whiteSpace:"nowrap",bottom:"-12px",opacity:"0.7",fontWeight:"normal",fontSize:14,lineHeight:"14px"}},n)):r.createElement(k.Z,{variant:"h1",noWrap:!0,sx:{flex:"none"},color:"primary"},a),r.createElement(P,null,r.createElement(_,null,r.createElement(w.Z,{sx:{color:"#BBBBBB"}})),r.createElement(B,{placeholder:"ÐÐ¾Ð¸ÑÐºâ¦",tabIndex:2}))),r.createElement(A,null,S.is_logged&&r.createElement(b.Z,{alt:"Nice User",src:"/img/face01.png",sx:{"@media (max-width:450px)":{display:"none"}}}),r.createElement(f.Z,{title:S.is_logged?"ÐÑÐ¹ÑÐ¸":"ÐÐ¾Ð¹ÑÐ¸",arrow:!0},r.createElement(h.Fg,{to:S.is_logged?"/":"/login",tabIndex:-1},r.createElement(E.Z,{edge:"start",onClick:S.is_logged?e=>{S.is_logged&&S.db2_abtr.logout()}:()=>{},"aria-label":"close",tabIndex:3,sx:{color:"primary.main",ml:{xs:.5,sm:1,md:3},mr:{xs:.5,sm:1,md:2}}},S.is_logged?r.createElement(v.Z,{fontSize:"medium"}):r.createElement(Z.Z,{fontSize:"medium"})))))),r.createElement(d.Z,{sx:{zIndex:1,m:0}}))}var D=n(6501);const z=(0,a.ZP)("main")`
  display: flex;
  flex-grow: 1;
  width: 100%;
  padding: 0;
  transition: padding 500ms ease-out;
  background-color: ${c.SB?.body?.css?.backgroundColor||"#E8F1FF"};
  box-shadow: ${c.SB?.body?.css?.boxShadow||"none"}
`,$=(0,a.ZP)(D.Z)((({theme:e})=>({textAlign:"center",width:"802px",maxWidth:"802px",minWidth:"350px",margin:e.spacing(2,"auto"),padding:e.spacing(2),display:"flex",flexFlow:"column wrap",flexGrow:1,boxSizing:"border-box",alignSelf:"stretch",backgroundColor:c.SB?.paper?.css?.backgroundColor||"white",minHeight:`calc(100vh - ${Number("58")+32}px )`,"@media (max-width:802px)":{margin:0,minHeight:`calc(100vh - ${Number("58")}px )`}})));function F(e){return r.createElement(r.Fragment,null,r.createElement(W,{...e}),r.createElement(i.Z,{sx:{display:"flex",alignItems:"stretch"}},e.drawerBody&&r.createElement(x,{...e}),r.createElement(l.$B,{style:{width:"100vw",height:"calc(100vh - 58px)"}},r.createElement(z,null,r.createElement($,{elevation:5},e.children)))))}},802:function(e,t,n){n.d(t,{Fg:function(){return l}});n(7294);var r=n(9602),a=n(9711);const l=(0,r.ZP)(a.rU)`
     text-decoration: none;
`}}]);
//# sourceMappingURL=718.bundle.js.map